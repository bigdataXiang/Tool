package com.svail.population_mobility;
import java.util.Vector;

import org.json.JSONArray;  
import org.json.JSONException;    
import org.json.JSONObject;

import com.svail.util.FileTool;
import com.svail.util.Tool;
 

public class JsonData {
	public String Code;
	public String CodeAddr;
	public String CodeCoor;
	public String CodeCoorLN;
	public String CodeCoorLA;
	public String CodeReg;
	public static String Folder="D:/zhouxiang/人口数据/宾馆数据/人口统计/CodeResult .txt";
	 public static void main(String[] args) {  
		  
		 productJson();
	  
	   }
	 public JsonData(String line){
		 if(line.indexOf("<Code>")!=-1)
			 Code= Tool.getStrByKey(line,"<Code>","</Code>","</Code>");
		 if(line.indexOf("<CodeAddr>")!=-1)
			 CodeAddr= Tool.getStrByKey(line,"<CodeAddr>","</CodeAddr>","</CodeAddr>");
		 if(line.indexOf("<CodeCoor>")!=-1){
			 CodeCoor=Tool.getStrByKey(line,"<CodeCoor>","</CodeCoor>","</CodeCoor>");
			 String[] arry=CodeCoor.split(";");
			 CodeCoorLN=arry[0];
			 CodeCoorLA=arry[1];
		 }
		if(line.indexOf("<CodeReg>")!=-1)
			 CodeReg=Tool.getStrByKey(line,"<CodeReg>","</CodeReg>","</CodeReg>");
		 
		 
	 }
	 public static void productJson(){
		 JSONObject jsonObj = new JSONObject();//创建json格式的数据  
		  
	      JSONArray jsonArr = new JSONArray();//json格式的数组  
	  
	    
	      
	  
	      try {  
	    	  Vector<String> rds = FileTool.Load(Folder,"UTF-8");
	          for(int i=0;i<rds.size();i++)
	          {
	        	  String element=rds.elementAt(i);
	        	  JsonData jsondata=new  JsonData(element);
	        	  JSONObject jsonObjArr = new JSONObject();  
	        	  
	        	  
	        	  jsonObjArr.put("CodeAddr",jsondata.CodeAddr);
	        	  jsonObjArr.put("CodeCoorLN", jsondata.CodeCoorLN);  
	        	  jsonObjArr.put("CodeCoorLA", jsondata.CodeCoorLA); 
	        	  jsonObjArr.put("CodeReg",jsondata.CodeReg); 
	        	  jsonObjArr.put("Code",jsondata.Code);  
	        	  jsonArr.put(jsonObjArr);
	        	  
	 	          
	          }
	          
	  
	         //将json格式的数据放到json格式的数组里  
	  
	        // jsonObj.put("Points", jsonObjArr);//再将这个json格式的的数组放到最终的json对象中。  
	  
	         System.out.println(jsonArr);  
	         FileTool.Dump(jsonArr.toString(), "D:/zhouxiang/人口数据/宾馆数据/人口统计/CodeJson .txt", "utf-8");
	         
	  
	      } catch (JSONException e) {  
	  
	         // TODO Auto-generated catch block  
	  
	         e.printStackTrace();  
	  
	      }  
		 
	 }

}
